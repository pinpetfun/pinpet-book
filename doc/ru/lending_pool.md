# üè¶ –í–≤–µ–¥–µ–Ω–∏–µ –≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∫—Ä–µ–¥–∏—Ç–Ω–æ–≥–æ –ø—É–ª–∞

## I. üìã –û–±–∑–æ—Ä

–ö—Ä–µ–¥–∏—Ç–Ω—ã–π –ø—É–ª PinPet —è–≤–ª—è–µ—Ç—Å—è –æ—Å–Ω–æ–≤–Ω—ã–º –º–æ–¥—É–ª–µ–º, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–º –º–∞—Ä–∂–∏–Ω–∞–ª—å–Ω—É—é —Ç–æ—Ä–≥–æ–≤–ª—é, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —É—Å–ª—É–≥–∏ –∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω–∏—è SOL –∏ —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–π –¥–ª–∏–Ω–Ω—ã—Ö –∏ –∫–æ—Ä–æ—Ç–∫–∏—Ö –ø–æ–∑–∏—Ü–∏–π. –ö—Ä–µ–¥–∏—Ç–Ω—ã–π –ø—É–ª –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º **–≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –ø—É–ª–∞**, –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –æ—Ç –ø—É–ª–∞ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏ —Å–ø–æ—Ç–æ–≤–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è, —á—Ç–æ –º–∞—Ä–∂–∏–Ω–∞–ª—å–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –Ω–æ—Ä–º–∞–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É —Å–ø–æ—Ç–æ–≤–æ–≥–æ —Ä—ã–Ω–∫–∞.

## II. üé≠ –î–≤–æ–π–Ω–∞—è —Ä–æ–ª—å –∫—Ä–µ–¥–∏—Ç–Ω–æ–≥–æ –ø—É–ª–∞

### 2.1 üí∞ –ö–∞–∫ –ø—É–ª –∫–∞–ø–∏—Ç–∞–ª–∞
- **–ö—Ä–µ–¥–∏—Ç–Ω—ã–π –ø—É–ª SOL**: –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞–π–º—ã SOL —Ç—Ä–µ–π–¥–µ—Ä–∞–º –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π
- **–ö—Ä–µ–¥–∏—Ç–Ω—ã–π –ø—É–ª —Ç–æ–∫–µ–Ω–æ–≤**: –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞–π–º—ã —Ç–æ–∫–µ–Ω–æ–≤ —Ç—Ä–µ–π–¥–µ—Ä–∞–º –¥–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –ø–æ–∑–∏—Ü–∏–π

### 2.2 üì¶ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–∞–º–∏
–ö—Ä–µ–¥–∏—Ç–Ω—ã–π –ø—É–ª –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö —Ä–µ–∑–µ—Ä–≤–∞:

| –¢–∏–ø —Ä–µ–∑–µ—Ä–≤–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|---------|------|------|
| `borrow_sol_reserve` | –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Ä–µ–∑–µ—Ä–≤ SOL | –î–ª—è –∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ç—Ä–µ–π–¥–µ—Ä–∞–º–∏ –¥–ª–∏–Ω–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π |
| `borrow_token_reserve` | –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Ä–µ–∑–µ—Ä–≤ —Ç–æ–∫–µ–Ω–æ–≤ | –î–ª—è –∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ç—Ä–µ–π–¥–µ—Ä–∞–º–∏ –∫–æ—Ä–æ—Ç–∫–∏—Ö –ø–æ–∑–∏—Ü–∏–π |

–≠—Ç–∏ —Ä–µ–∑–µ—Ä–≤—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π **–≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –±—É—Ö–≥–∞–ª—Ç–µ—Ä—Å–∫—É—é –∫–Ω–∏–≥—É**, —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø—É–ª–µ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏ —Å–ø–æ—Ç–æ–≤–æ–≥–æ —Ä—ã–Ω–∫–∞, –∏–∑–æ–ª—è—Ü–∏—è –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –º–µ—Ö–∞–Ω–∏–∑–º –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ü–µ–Ω–æ–≤—ã—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤.

## III. üîÑ –ü—Ä–æ—Ü–µ—Å—Å –∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω–∏—è –ø—Ä–∏ –º–∞—Ä–∂–∏–Ω–∞–ª—å–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–µ

### 3.1 üìà –î–ª–∏–Ω–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è (Long) - –ó–∞–µ–º SOL –¥–ª—è –ø–æ–∫—É–ø–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤

#### ‚¨ÜÔ∏è –≠—Ç–∞–ø –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏
```mermaid
graph LR
    A[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–Ω–æ—Å–∏—Ç –º–∞—Ä–∂—É –≤ SOL] --> B[–ó–∞–Ω–∏–º–∞–µ—Ç SOL –∏–∑ –∫—Ä–µ–¥–∏—Ç–Ω–æ–≥–æ –ø—É–ª–∞]
    B --> C[–ò—Å–ø–æ–ª—å–∑—É–µ—Ç SOL –¥–ª—è –ø–æ–∫—É–ø–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤]
    C --> D[–ë–ª–æ–∫–∏—Ä—É–µ—Ç —Ü–µ–Ω–æ–≤–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω]
    D --> E[–°–æ–∑–¥–∞–µ—Ç –æ—Ä–¥–µ—Ä –¥–ª–∏–Ω–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏]
```

**–ü–æ–¥—Ä–æ–±–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å**:
1. **–í–∫–ª–∞–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**: –í–Ω–µ—Å–µ–Ω–∏–µ –º–∞—Ä–∂–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 0.5 SOL) üíµ
2. **–í—ã–¥–∞—á–∞ –∫—Ä–µ–¥–∏—Ç–Ω–æ–≥–æ –ø—É–ª–∞**: –ó–∞–µ–º SOL –∏–∑ `borrow_sol_reserve` (–Ω–∞–ø—Ä–∏–º–µ—Ä, 4.5 SOL) üí∏
3. **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏**: –ü–æ–∫—É–ø–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –Ω–∞ AMM –Ω–∞ –æ–±—â—É—é —Å—É–º–º—É 5 SOL ‚öôÔ∏è
4. **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ü–µ–Ω–æ–≤–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞**: –ó–∞–ø–∏—Å—å —Ü–µ–Ω–æ–≤–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –Ω–∞ –º–æ–º–µ–Ω—Ç –ø–æ–∫—É–ø–∫–∏ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–∏ üîí
5. **–ó–∞–ø–∏—Å—å –æ—Ä–¥–µ—Ä–∞**: –°–æ–∑–¥–∞–Ω–∏–µ `MarginOrder`, –∑–∞–ø–∏—Å—å —Å—É–º–º—ã –∑–∞–π–º–∞, –º–∞—Ä–∂–∏, –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–∫–µ–Ω–æ–≤ –≤ –ø–æ–∑–∏—Ü–∏–∏ üìù


#### ‚¨áÔ∏è –≠—Ç–∞–ø –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏
```mermaid
graph LR
    A[–ü—Ä–æ–¥–∞–∂–∞ —Ç–æ–∫–µ–Ω–æ–≤ –≤ –ø–æ–∑–∏—Ü–∏–∏] --> B[–ü–æ–ª—É—á–µ–Ω–∏–µ SOL]
    B --> C{–†–∞—Å—á–µ—Ç –ø—Ä–∏–±—ã–ª–∏/—É–±—ã—Ç–∫–∞}
    C -->|–ü—Ä–∏–±—ã–ª—å| D[–í–æ–∑–≤—Ä–∞—Ç –∑–∞–π–º–∞ + –º–∞—Ä–∂–∞ + –ø—Ä–∏–±—ã–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é]
    C -->|–£–±—ã—Ç–æ–∫| E[–í–æ–∑–≤—Ä–∞—Ç –∑–∞–π–º–∞ + –æ—Å—Ç–∞—Ç–æ–∫ –º–∞—Ä–∂–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é]
    D --> F[–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ borrow_sol_reserve]
    E --> F
```

**–†–∞—Å—á–µ—Ç —Å—Ä–µ–¥—Å—Ç–≤**:
- –û–±—â–∞—è —Å—É–º–º–∞ SOL –æ—Ç –ø—Ä–æ–¥–∞–∂–∏ —Ç–æ–∫–µ–Ω–æ–≤ = `output_sol` üí∞
- –í—ã—á–µ—Ç —Ç–æ—Ä–≥–æ–≤–æ–π –∫–æ–º–∏—Å—Å–∏–∏ üí∏
- –í–æ–∑–≤—Ä–∞—Ç –∫—Ä–µ–¥–∏—Ç–Ω–æ–º—É –ø—É–ª—É: `borrow_amount` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ `borrow_sol_reserve` ‚¨ÖÔ∏è
- –î–æ—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è = –û–±—â–∞—è —Å—É–º–º–∞ - –ó–∞–µ–º - –ú–∞—Ä–∂–∞ ‚úÖ

### 3.2 üìâ –ö–æ—Ä–æ—Ç–∫–∞—è –ø–æ–∑–∏—Ü–∏—è (Short) - –ó–∞–µ–º —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏ –∑–∞ SOL

#### ‚¨ÜÔ∏è –≠—Ç–∞–ø –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏
```mermaid
graph LR
    A[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–Ω–æ—Å–∏—Ç –º–∞—Ä–∂—É –≤ SOL] --> B[–ó–∞–Ω–∏–º–∞–µ—Ç —Ç–æ–∫–µ–Ω—ã –∏–∑ –∫—Ä–µ–¥–∏—Ç–Ω–æ–≥–æ –ø—É–ª–∞]
    B --> C[–ü—Ä–æ–¥–∞–µ—Ç —Ç–æ–∫–µ–Ω—ã –∑–∞ SOL]
    C --> D[–ë–ª–æ–∫–∏—Ä—É–µ—Ç —Ü–µ–Ω–æ–≤–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω]
    D --> E[–°–æ–∑–¥–∞–µ—Ç –æ—Ä–¥–µ—Ä –∫–æ—Ä–æ—Ç–∫–æ–π –ø–æ–∑–∏—Ü–∏–∏]
```

**–ü–æ–¥—Ä–æ–±–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å**:
1. **–í–∫–ª–∞–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**: –í–Ω–µ—Å–µ–Ω–∏–µ –º–∞—Ä–∂–∏ –≤ SOL üíµ
2. **–í—ã–¥–∞—á–∞ –∫—Ä–µ–¥–∏—Ç–Ω–æ–≥–æ –ø—É–ª–∞**: –ó–∞–µ–º —Ç–æ–∫–µ–Ω–æ–≤ –∏–∑ `borrow_token_reserve` üíé
3. **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏**: –ü—Ä–æ–¥–∞–∂–∞ —Ç–æ–∫–µ–Ω–æ–≤ –∑–∞ SOL, –¥–µ–ø–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ø—É–ª —Å—Ä–µ–¥—Å—Ç–≤ ‚öôÔ∏è
4. **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ü–µ–Ω–æ–≤–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞**: –ó–∞–ø–∏—Å—å —Ü–µ–Ω–æ–≤–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –Ω–∞ –º–æ–º–µ–Ω—Ç –ø—Ä–æ–¥–∞–∂–∏ üîí
5. **–ó–∞–ø–∏—Å—å –æ—Ä–¥–µ—Ä–∞**: –°–æ–∑–¥–∞–Ω–∏–µ `MarginOrder`, –∑–∞–ø–∏—Å—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–µ–º–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤, –º–∞—Ä–∂–∏, –ø–æ–∑–∏—Ü–∏–∏ –≤ SOL üìù



#### ‚¨áÔ∏è –≠—Ç–∞–ø –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏
```mermaid
graph LR
    A[–í—ã–∫—É–ø —Ç–æ–∫–µ–Ω–æ–≤ –∑–∞ SOL] --> B[–í–æ–∑–≤—Ä–∞—Ç —Ç–æ–∫–µ–Ω–æ–≤ –∫—Ä–µ–¥–∏—Ç–Ω–æ–º—É –ø—É–ª—É]
    B --> C{–†–∞—Å—á–µ—Ç –ø—Ä–∏–±—ã–ª–∏/—É–±—ã—Ç–∫–∞}
    C -->|–ü—Ä–∏–±—ã–ª—å| D[–û—Å—Ç–∞—Ç–æ–∫ SOL = –ú–∞—Ä–∂–∞ + –ü—Ä–∏–±—ã–ª—å]
    C -->|–£–±—ã—Ç–æ–∫| E[–û—Å—Ç–∞—Ç–æ–∫ SOL = –ú–∞—Ä–∂–∞ - –£–±—ã—Ç–æ–∫]
    D --> F[–í—ã–ø–ª–∞—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é]
    E --> F
    F --> G[–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ borrow_token_reserve]
```

**–†–∞—Å—á–µ—Ç —Å—Ä–µ–¥—Å—Ç–≤**:
- –û–±—â–∞—è —Å—É–º–º–∞ SOL –¥–ª—è –≤—ã–∫—É–ø–∞ —Ç–æ–∫–µ–Ω–æ–≤ = `required_sol` + –∫–æ–º–∏—Å—Å–∏—è üí∞
- –í–æ–∑–≤—Ä–∞—Ç –∫—Ä–µ–¥–∏—Ç–Ω–æ–º—É –ø—É–ª—É: `borrow_amount` (—Ç–æ–∫–µ–Ω—ã) –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ `borrow_token_reserve` ‚¨ÖÔ∏è
- –î–æ—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è = SOL –æ—Ç –ø—Ä–æ–¥–∞–∂–∏ —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ - SOL –Ω–∞ –ø–æ–∫—É–ø–∫—É —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ - –ú–∞—Ä–∂–∞ ‚úÖ

## IV. üí∏ –ú–µ—Ö–∞–Ω–∏–∑–º –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫—Ä–µ–¥–∏—Ç–Ω–æ–≥–æ –ø—É–ª–∞

### 4.1 ‚úÖ –í–æ–∑–≤—Ä–∞—Ç –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–º –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–∏
–ü—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–º –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤–æ–∑–≤—Ä–∞—Ç:

| –¢–∏–ø —Å–¥–µ–ª–∫–∏ | –í–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π –∞–∫—Ç–∏–≤ | –ò—Å—Ç–æ—á–Ω–∏–∫ –≤–æ–∑–≤—Ä–∞—Ç–∞ | –í–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π —Ä–µ–∑–µ—Ä–≤ |
|---------|---------|---------|---------|
| –ó–∞–∫—Ä—ã—Ç–∏–µ –¥–ª–∏–Ω–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ | SOL | –í—ã—Ä—É—á–∫–∞ –æ—Ç –ø—Ä–æ–¥–∞–∂–∏ —Ç–æ–∫–µ–Ω–æ–≤ | `borrow_sol_reserve` |
| –ó–∞–∫—Ä—ã—Ç–∏–µ –∫–æ—Ä–æ—Ç–∫–æ–π –ø–æ–∑–∏—Ü–∏–∏ | –¢–æ–∫–µ–Ω—ã | –í—ã–∫—É–ø–ª–µ–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã | `borrow_token_reserve` |

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤–æ–∑–≤—Ä–∞—Ç–∞**:
1. –í—ã—á–µ—Ç —Ç–æ—Ä–≥–æ–≤–æ–π –∫–æ–º–∏—Å—Å–∏–∏ üí∏
2. –í–æ–∑–≤—Ä–∞—Ç –æ—Å–Ω–æ–≤–Ω–æ–π —Å—É–º–º—ã –∑–∞–π–º–∞ ‚¨ÖÔ∏è
3. –í–æ–∑–≤—Ä–∞—Ç –º–∞—Ä–∂–∏ üí∞
4. –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏–±—ã–ª–∏/–æ–±—Ä–∞–±–æ—Ç–∫–∞ —É–±—ã—Ç–∫–æ–≤ üìä

### 4.2 ‚ö†Ô∏è –í–æ–∑–≤—Ä–∞—Ç –ø—Ä–∏ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π –ª–∏–∫–≤–∏–¥–∞—Ü–∏–∏
–ö–æ–≥–¥–∞ —Ü–µ–Ω–∞ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç —Å—Ç–æ–ø-–ª–æ—Å—Å/—Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç —Ü–µ–Ω—ã, —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é:

```mermaid
graph TD
    A[–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ü–µ–Ω—ã] --> B{–£—Å–ª–æ–≤–∏–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è?}
    B -->|–°—Ç–æ–ø-–ª–æ—Å—Å –¥–ª–∏–Ω–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏| C[–¶–µ–Ω–∞ ‚â§ lock_lp_start_price]
    B -->|–¢–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç –∫–æ—Ä–æ—Ç–∫–æ–π –ø–æ–∑–∏—Ü–∏–∏| D[–¶–µ–Ω–∞ ‚â• lock_lp_start_price]
    C --> E[–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ]
    D --> E
    E --> F[–†–∞—Å—á–µ—Ç –ø–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É —Ü–µ–Ω–æ–≤–æ–º—É –¥–∏–∞–ø–∞–∑–æ–Ω—É]
    F --> G[–í–æ–∑–≤—Ä–∞—Ç –∑–∞–π–º–∞]
    G --> H[–í–æ–∑–≤—Ä–∞—Ç –æ—Å—Ç–∞—Ç–∫–∞ –º–∞—Ä–∂–∏]
```

**–ó–∞—â–∏—Ç–∞ –ø—Ä–∏ –ª–∏–∫–≤–∏–¥–∞—Ü–∏–∏** üõ°Ô∏è:
- –ë–ª–∞–≥–æ–¥–∞—Ä—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ —Ü–µ–Ω–æ–≤–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞, –¥–∞–∂–µ –ø—Ä–∏ —Ä–µ–∑–∫–∏—Ö –∫–æ–ª–µ–±–∞–Ω–∏—è—Ö —Ä—ã–Ω–æ—á–Ω–æ–π —Ü–µ–Ω—ã –º–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å –ø–æ–∑–∏—Ü–∏—é –ø–æ –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —Ü–µ–Ω–µ
- –ö–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –º–∞—Ä–∂–∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å—Ä–µ–¥—Å—Ç–≤ –∫—Ä–µ–¥–∏—Ç–Ω–æ–≥–æ –ø—É–ª–∞

### 4.3 ‚è∞ –õ–∏–∫–≤–∏–¥–∞—Ü–∏—è –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Å—Ä–æ–∫–∞
–ü–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –æ—Ä–¥–µ—Ä–∞ –ª—é–±–æ–π –º–æ–∂–µ—Ç –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏:

- –î–ª–∏–Ω–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è: –í—Ä–µ–º—è –∏—Å—Ç–µ—á–µ–Ω–∏—è `end_time` = –≤—Ä–µ–º—è –æ—Ç–∫—Ä—ã—Ç–∏—è + `borrow_duration` ‚è±Ô∏è
- –ö–æ—Ä–æ—Ç–∫–∞—è –ø–æ–∑–∏—Ü–∏—è: –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ
- –ü–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ —Ç–µ–∫—É—â–µ–π —Ä—ã–Ω–æ—á–Ω–æ–π —Ü–µ–Ω–µ, –≤–æ–∑–≤—Ä–∞—Ç –∑–∞–π–º–∞ ‚ö°

## V. üõ°Ô∏è –ú–µ—Ö–∞–Ω–∏–∑–º –∑–∞—â–∏—Ç—ã —Å—Ä–µ–¥—Å—Ç–≤ –∫—Ä–µ–¥–∏—Ç–Ω–æ–≥–æ –ø—É–ª–∞

### 5.1 üíº –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –º–∞—Ä–∂–µ
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –º–∞—Ä–∂–∞**: `MIN_MARGIN_SOL_AMOUNT` (—Å–∏—Å—Ç–µ–º–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä) üí∞
- **–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –º–∞—Ä–∂–∏**: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫—Ä–µ–¥–∏—Ç–Ω–æ–≥–æ –ø–ª–µ—á–∞ –∏ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –∫–æ–ª–µ–±–∞–Ω–∏–π —Ü–µ–Ω üìä
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –º–∞—Ä–∂–∏**: –ü–æ–∫—Ä—ã—Ç–∏–µ —É–±—ã—Ç–∫–æ–≤ –ø—Ä–∏ –Ω–µ–±–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ü–µ–Ω—ã üîí

### 5.2 üîê –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ü–µ–Ω–æ–≤–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞
–ö–∞–∂–¥—ã–π –æ—Ä–¥–µ—Ä –±–ª–æ–∫–∏—Ä—É–µ—Ç –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º —Ü–µ–Ω–æ–≤–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ:

```
–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–ª—è –¥–ª–∏–Ω–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏: [lock_lp_start_price, lock_lp_end_price] (–¥–∏–∞–ø–∞–∑–æ–Ω —Å–Ω–∏–∂–µ–Ω–∏—è —Ü–µ–Ω—ã)
–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–ª—è –∫–æ—Ä–æ—Ç–∫–æ–π –ø–æ–∑–∏—Ü–∏–∏: [lock_lp_start_price, lock_lp_end_price] (–¥–∏–∞–ø–∞–∑–æ–Ω —Ä–æ—Å—Ç–∞ —Ü–µ–Ω—ã)
```

–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—É—é –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –∑–∞–π–º–∞ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–∏. ‚úÖ

### 5.3 ‚úîÔ∏è –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑–µ—Ä–≤–æ–≤
–ü–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º –ø–æ–∑–∏—Ü–∏–∏ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:

| –ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–π –ø—É–Ω–∫—Ç | –£—Å–ª–æ–≤–∏–µ | –ö–æ–¥ –æ—à–∏–±–∫–∏ |
|-------|------|-------|
| –†–µ–∑–µ—Ä–≤ SOL | `required_borrow_sol ‚â§ borrow_sol_reserve` | `InsufficientBorrowingReserve` |
| –†–µ–∑–µ—Ä–≤ —Ç–æ–∫–µ–Ω–æ–≤ | `required_borrow_token ‚â§ borrow_token_reserve` | `InsufficientBorrowingReserve` |


## VI. üí∏ –ú–µ—Ö–∞–Ω–∏–∑–º –∫–æ–º–∏—Å—Å–∏–π

### 6.1 üìä –ö–æ–º–∏—Å—Å–∏—è –∑–∞ –º–∞—Ä–∂–∏–Ω–∞–ª—å–Ω—É—é —Ç–æ—Ä–≥–æ–≤–ª—é
- **–°—Ç–∞–≤–∫–∞ –∫–æ–º–∏—Å—Å–∏–∏**: `borrow_fee` (–Ω–∞–ø—Ä–∏–º–µ—Ä, 0.5% = 50 –±–∞–∑–∏—Å–Ω—ã—Ö –ø—É–Ω–∫—Ç–æ–≤) üí∞
- **–í—Ä–µ–º—è –≤–∑–∏–º–∞–Ω–∏—è**: –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–∏ ‚è∞
- **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–º–∏—Å—Å–∏–∏**:
  - –ü–∞—Ä—Ç–Ω–µ—Ä: –ø—Ä–æ–ø–æ—Ä—Ü–∏—è `fee_split` (–Ω–∞–ø—Ä–∏–º–µ—Ä, 80%) ü§ù
  - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ø–æ—Å—Ç–∞–≤—â–∏–∫: 100% - `fee_split` (–Ω–∞–ø—Ä–∏–º–µ—Ä, 20%) ‚öôÔ∏è

### 6.2 ‚ö° –ö–æ–º–∏—Å—Å–∏—è –∑–∞ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—É—é –ª–∏–∫–≤–∏–¥–∞—Ü–∏—é
- –ü—Ä–∏ –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–∏–∏ –ª–∏–∫–≤–∏–¥–∞—Ü–∏–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –≤–∑–∏–º–∞–µ—Ç—Å—è `borrow_fee` –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–ª–∞—Ç—ã –∑–∞ –ª–∏–∫–≤–∏–¥–∞—Ü–∏—é üí∏
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å—Ç–∏–º—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ç—Ä–µ—Ç—å–∏—Ö –ª–∏—Ü –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é –ª–∏–∫–≤–∏–¥–∞—Ü–∏–∏ –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Å—Ä–æ–∫–∞ üéØ

## VII. üéØ –§—É–Ω–∫—Ü–∏—è —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —á–∞—Å—Ç–∏—á–Ω–æ –∑–∞–∫—Ä—ã–≤–∞—Ç—å –ø–æ–∑–∏—Ü–∏–∏ –¥–ª—è –≥–∏–±–∫–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∏—Å–∫–∞–º–∏: ‚öôÔ∏è

### 7.1 üìà –ß–∞—Å—Ç–∏—á–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –¥–ª–∏–Ω–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏

```mermaid
graph TB
    A[–î–µ—Ä–∂–∏—Ç 1000 —Ç–æ–∫–µ–Ω–æ–≤<br/>–ó–∞–µ–º 10 SOL] --> B[–ü—Ä–æ–¥–∞–µ—Ç 400 —Ç–æ–∫–µ–Ω–æ–≤]
    B --> C[–ü–æ–ª—É—á–∞–µ—Ç 4.5 SOL]
    C --> D{–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤}
    D --> E[–í—ã—á–µ—Ç –∫–æ–º–∏—Å—Å–∏–∏ 0.02 SOL]
    D --> F[–í–æ–∑–≤—Ä–∞—Ç –∑–∞–π–º–∞ 3.8 SOL]
    D --> G[–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø—Ä–∏–±—ã–ª–∏ 0.68 SOL<br/>–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é]
    F --> H[–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—Ä–µ–¥–∏—Ç–Ω–æ–≥–æ –ø—É–ª–∞<br/>borrow_sol_reserve +3.8]
    E --> I[–í—ã–ø–ª–∞—Ç–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—é –∫–æ–º–∏—Å—Å–∏–∏]
    G --> J[–ü–µ—Ä–µ–≤–æ–¥ –Ω–∞ —Å—á–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è]

    H --> K[–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –æ—Ä–¥–µ—Ä–∞]
    I --> K
    J --> K

    K --> L[–û—Å—Ç–∞—Ç–æ–∫ –ø–æ–∑–∏—Ü–∏–∏:<br/>600 —Ç–æ–∫–µ–Ω–æ–≤<br/>–ó–∞–µ–º 6.2 SOL<br/>–ù–æ–≤–∞—è —Ü–µ–Ω–∞ —Å—Ç–æ–ø-–ª–æ—Å—Å–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞]

    style A fill:#e1f5ff
    style L fill:#fff4e1
    style G fill:#d4edda
    style E fill:#f8d7da
```

**–î–µ—Ç–∞–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ä–¥–µ—Ä–∞**:

| –ü–æ–ª–µ | –î–æ –∑–∞–∫—Ä—ã—Ç–∏—è | –ü–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|-------|-------|------|
| `position_asset_amount` | 1000 —Ç–æ–∫–µ–Ω–æ–≤ | 600 —Ç–æ–∫–µ–Ω–æ–≤ | –û—Å—Ç–∞—Ç–æ–∫ –ø–æ–∑–∏—Ü–∏–∏ |
| `borrow_amount` | 10 SOL | 6.2 SOL | –û—Å—Ç–∞—Ç–æ–∫ –∑–∞–π–º–∞ |
| `lock_lp_start_price` | –°—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞ —Å—Ç–æ–ø-–ª–æ—Å—Å–∞ | –ù–æ–≤–∞—è —Ü–µ–Ω–∞ —Å—Ç–æ–ø-–ª–æ—Å—Å–∞ | –ü–µ—Ä–µ—Å—á–µ—Ç –ø–æ –Ω–æ–≤–æ–π –ø–æ–∑–∏—Ü–∏–∏ |
| `realized_sol_amount` | 0 SOL | 0.68 SOL | –ù–∞–∫–æ–ø–ª–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–∏–±—ã–ª—å |

### 7.2 üìâ –ß–∞—Å—Ç–∏—á–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –∫–æ—Ä–æ—Ç–∫–æ–π –ø–æ–∑–∏—Ü–∏–∏

```mermaid
graph TB
    A[–ó–∞–µ–º 1000 —Ç–æ–∫–µ–Ω–æ–≤<br/>–î–µ—Ä–∂–∏—Ç 12 SOL] --> B[–ò—Å–ø–æ–ª—å–∑—É–µ—Ç 4 SOL –¥–ª—è –≤—ã–∫—É–ø–∞ 350 —Ç–æ–∫–µ–Ω–æ–≤]
    B --> C{–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤}
    C --> D[–ü–æ–∫—É–ø–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ —Å—Ç–æ–∏—Ç 3.98 SOL]
    C --> E[–ö–æ–º–∏—Å—Å–∏—è 0.02 SOL]
    D --> F[–í–æ–∑–≤—Ä–∞—Ç 350 —Ç–æ–∫–µ–Ω–æ–≤ –∫—Ä–µ–¥–∏—Ç–Ω–æ–º—É –ø—É–ª—É]
    F --> G[–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—Ä–µ–¥–∏—Ç–Ω–æ–≥–æ –ø—É–ª–∞<br/>borrow_token_reserve +350]

    A --> H[–ò—Å—Ö–æ–¥–Ω–∞—è –º–∞—Ä–∂–∞ 2 SOL<br/>–í—ã—Ä—É—á–∫–∞ –æ—Ç –ø—Ä–æ–¥–∞–∂–∏ —Ç–æ–∫–µ–Ω–æ–≤ 12 SOL]
    H --> I[–û—Å—Ç–∞—Ç–æ–∫ –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è<br/>12 - 4 = 8 SOL]
    I --> J{–†–∞—Å—á–µ—Ç –ø—Ä–∏–±—ã–ª–∏/—É–±—ã—Ç–∫–∞}
    J --> K[–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø—Ä–∏–±—ã–ª–∏ 1.5 SOL<br/>–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é]
    K --> L[–ü–µ—Ä–µ–≤–æ–¥ –Ω–∞ —Å—á–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è]

    G --> M[–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –æ—Ä–¥–µ—Ä–∞]
    E --> N[–í—ã–ø–ª–∞—Ç–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—é –∫–æ–º–∏—Å—Å–∏–∏]
    L --> M
    N --> M

    M --> O[–û—Å—Ç–∞—Ç–æ–∫ –ø–æ–∑–∏—Ü–∏–∏:<br/>–ó–∞–µ–º 650 —Ç–æ–∫–µ–Ω–æ–≤<br/>–î–µ—Ä–∂–∏—Ç 6.5 SOL<br/>–ù–æ–≤–∞—è —Ü–µ–Ω–∞ —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞]

    style A fill:#ffe1e1
    style O fill:#fff4e1
    style K fill:#d4edda
    style E fill:#f8d7da
```

**–î–µ—Ç–∞–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ä–¥–µ—Ä–∞**:

| –ü–æ–ª–µ | –î–æ –∑–∞–∫—Ä—ã—Ç–∏—è | –ü–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|-------|-------|------|
| `borrow_amount` | 1000 —Ç–æ–∫–µ–Ω–æ–≤ | 650 —Ç–æ–∫–µ–Ω–æ–≤ | –û—Å—Ç–∞—Ç–æ–∫ –∑–∞–π–º–∞ (—Ç–æ–∫–µ–Ω—ã) |
| `position_asset_amount` | 12 SOL | 6.5 SOL | –û—Å—Ç–∞—Ç–æ–∫ –≤ SOL |
| `lock_lp_start_price` | –°—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞ —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç–∞ | –ù–æ–≤–∞—è —Ü–µ–Ω–∞ —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç–∞ | –ü–µ—Ä–µ—Å—á–µ—Ç –ø–æ –Ω–æ–≤–æ–π –ø–æ–∑–∏—Ü–∏–∏ |
| `realized_sol_amount` | 0 SOL | 1.5 SOL | –ù–∞–∫–æ–ø–ª–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–∏–±—ã–ª—å |

### 7.3 ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏
–û—Å—Ç–∞—Ç–æ–∫ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ—Å–ª–µ —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å ‚â• `MIN_TRADE_TOKEN_AMOUNT * 2`, —á—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –º–∏–∫—Ä–æ–ø–æ–∑–∏—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ª–∏–∫–≤–∏–¥–∏—Ä–æ–≤–∞—Ç—å.

## VIII. üîó –í–∑–∞–∏–º–æ—Å–≤—è–∑—å –∫—Ä–µ–¥–∏—Ç–Ω–æ–≥–æ –ø—É–ª–∞ –∏ –ø—É–ª–∞ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏

### 8.1 üîí –ò–∑–æ–ª—è—Ü–∏—è —Å—Ä–µ–¥—Å—Ç–≤
- **–ü—É–ª –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏ —Å–ø–æ—Ç–æ–≤–æ–≥–æ —Ä—ã–Ω–∫–∞**: `lp_sol_reserve` + `lp_token_reserve`
- **–í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –∫—Ä–µ–¥–∏—Ç–Ω—ã–π –ø—É–ª**: `borrow_sol_reserve` + `borrow_token_reserve`

–•–æ—Ç—è —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –æ–¥–Ω–∏—Ö –∏ —Ç–µ—Ö –∂–µ `pool_sol_account` –∏ `pool_token_account`, –ª–æ–≥–∏—á–µ—Å–∫–∞—è –∏–∑–æ–ª—è—Ü–∏—è –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –º–µ—Ö–∞–Ω–∏–∑–º –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ü–µ–Ω–æ–≤—ã—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤. üõ°Ô∏è

### 8.2 üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ü–µ–Ω
- –°–ø–æ—Ç–æ–≤–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è –∏ –º–∞—Ä–∂–∏–Ω–∞–ª—å–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–Ω—É –∏ —Ç—É –∂–µ `price` (—Ç–µ–∫—É—â–∞—è —Ä—ã–Ω–æ—á–Ω–∞—è —Ü–µ–Ω–∞) üíπ
- –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω—ã —Å–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–µ–∑–µ—Ä–≤—ã –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏: `price_to_reserves(price)` ‚öôÔ∏è

### 8.3 ü§ù –í–∑–∞–∏–º–æ–¥–æ–ø–æ–ª–Ω—è—é—â–∞—è –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å
- –¶–µ–Ω–æ–≤—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã, –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–∞—Ä–∂–∏–Ω–∞–ª—å–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–µ–π, –Ω–µ —É—á–∞—Å—Ç–≤—É—é—Ç –≤ —Å–ø–æ—Ç–æ–≤–æ–π —Ç–æ—Ä–≥–æ–≤–ª–µ üîê
- –°–ø–æ—Ç–æ–≤–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è –º–æ–∂–µ—Ç –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –º–∞—Ä–∂–∏–Ω–∞–ª—å–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤, –≤—ã—Å–≤–æ–±–æ–∂–¥–∞—è –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å ‚ö°

## IX. ‚ú® –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ |
|-----|------|------|
| –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —Ä–µ–∑–µ—Ä–≤—ã | –ö—Ä–µ–¥–∏—Ç–Ω—ã–π –ø—É–ª ‚Äî —ç—Ç–æ –±—É—Ö–≥–∞–ª—Ç–µ—Ä—Å–∫–∞—è –∑–∞–ø–∏—Å—å, –∞ –Ω–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—É–ª —Å—Ä–µ–¥—Å—Ç–≤ | –í—ã—Å–æ–∫–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–∞–ø–∏—Ç–∞–ª–∞, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è |
| –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ü–µ–Ω–æ–≤–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ | –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–∞—è —Ü–µ–Ω–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏ | –°–Ω–∏–∂–µ–Ω–∏–µ —Ä–∏—Å–∫–∞ –ª–∏–∫–≤–∏–¥–∞—Ü–∏–∏, –∑–∞—â–∏—Ç–∞ –∫—Ä–µ–¥–∏—Ç–Ω–æ–≥–æ –ø—É–ª–∞ |
| –î–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ –∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω–∏–µ | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω–∏—è SOL –∏ —Ç–æ–∫–µ–Ω–æ–≤ | –ü–æ–ª–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥–ª–∏–Ω–Ω—ã—Ö –∏ –∫–æ—Ä–æ—Ç–∫–∏—Ö –ø–æ–∑–∏—Ü–∏–π |
| –ß–∞—Å—Ç–∏—á–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ | –ì–∏–±–∫–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ–∑–∏—Ü–∏–π | –•–æ—Ä–æ—à–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç, –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–π —Ä–∏—Å–∫ |
| –õ–∏–∫–≤–∏–¥–∞—Ü–∏—è –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏—é | –í—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ + —Å—Ç–∏–º—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–µ—Ç—å–∏—Ö –ª–∏—Ü | –û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ —Å–≤–æ–µ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –≤–æ–∑–≤—Ä–∞—Ç–∞ —Å—Ä–µ–¥—Å—Ç–≤ |


